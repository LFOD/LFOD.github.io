{
  "hash": "a8fdaf24a78e52a268f412d78a37c8be",
  "result": {
    "markdown": "---\ntitle: Thanksgiving Gantt Chart\nauthor: \"Lucy D'Agostino McGowan\"\ndate: '2017-11-12'\nslug: thanksgiving-gantt-chart\ncategories: [rstats, thankyou]\ntags: [rstats, thankyou]\ndescription: 'Thanksgiving ü¶É is right around the corner üéâ -- this year we are hosting 17 people üò±. If you too are hosting way more than your kitchen normally cooks for, perhaps this will be of interest!'\n---\n\n\nThanksgiving ü¶É is right around the corner üéâ -- this year we are hosting 17 people üò±. \n\n::: column-margin\nIngredients:  \nüìó Google Sheet  \nüì¶ googlesheets  \nüì¶ lubridate  \nüì¶ plotly\n:::\n\nIf you too are hosting way more than your kitchen normally cooks for, perhaps this will be of interest! We decided to make a [Google Sheet](https://docs.google.com/spreadsheets/d/1k-H3CjkQRQJv7Ni8SA9Ghse8Y-kuKSLVAV4R4w4xXRE/edit?usp=sharing) of the various dishes so we could plot out what will be cooking when.\n\n<iframe width = \"500\" height = \"300\" src=\"https://docs.google.com/spreadsheets/d/e/2PACX-1vQPxkGgwYI7gP8uhFPogzE2uEk5IH4mvMay7HdUnJzp38kUOPzSORO7Est5o-V8eSVYBGb6fv7XVKS0/pubhtml?widget=true&amp;headers=false\"></iframe>\n\n## Packages we'll use\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(googlesheets4)\nlibrary(lubridate)\nlibrary(plotly)\n```\n:::\n\n\n## Pull in the data\n\nFirst we can pull the spreadsheet into R using the googlesheets package.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Read the sheet into R\ndishes_df <- read_sheet(\"https://docs.google.com/spreadsheets/d/1k-H3CjkQRQJv7Ni8SA9Ghse8Y-kuKSLVAV4R4w4xXRE/edit?usp=sharing\")\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n## Clean up a bit üõÄ\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndishes_df$start <- as_datetime(dishes_df$start,\n                                          tz = \"America/Chicago\")\ndishes_df$finish <- as_datetime(dishes_df$finish,\n                                           tz = \"America/Chicago\")\ndishes_df$minutes <- dishes_df$finish - dishes_df$start\n```\n:::\n\n\n<label for=\"tufte-mn-\" class=\"margin-toggle\">&#8853;</label><input type=\"checkbox\" id=\"tufte-mn-\" class=\"margin-toggle\"><span class=\"marginnote\">Let's pick some lovely turkey-themed colors for our chart üåà brought to you by [colour lovers](http://www.colourlovers.com/palette/479526/Turkey_Sanwich).</span>\n\n::: {.cell}\n\n```{.r .cell-code}\ncols <- c(\"#487878\", \"#783030\", \"#904830\", \"#A87860\", \"#D89048\")\ndishes_df$color  <- factor(dishes_df$where, labels = cols)\n\n## Order for the chart\ndishes_df <- dishes_df[order(dishes_df$start,\n                             decreasing = TRUE), ]\n```\n:::\n\n\n## Make the plot üíÉ\n\n<label for=\"tufte-mn-\" class=\"margin-toggle\">&#8853;</label><input type=\"checkbox\" id=\"tufte-mn-\" class=\"margin-toggle\"><span class=\"marginnote\">This is inspired by a [Plotly](https://twitter.com/plotlygraphs) [blog post](https://moderndata.plot.ly/gantt-charts-in-r-using-plotly/)!</span>\n\n::: {.cell}\n\n```{.r .cell-code}\np <- plot_ly()\n\nfor (i in 1:nrow(dishes_df)) {\n  p <- add_lines(p,\n                 x = c(dishes_df$start[i], dishes_df$finish[i]), \n                 y = c(i, i), \n                 line = list(color = dishes_df$color[i],\n                             width = 20),\n                 hoverinfo = \"text\",\n                 text = paste(\"Dish: \",\n                              dishes_df$dish[i],\n                              \"<br>\",\n                              \"Cook time: \",\n                              dishes_df$minutes[i],\n                              \"minutes<br>\",\n                              \"Where: \",\n                              dishes_df$where[i]),\n                 showlegend = FALSE\n  ) \n}\n```\n:::\n\n\n<label for=\"tufte-mn-\" class=\"margin-toggle\">&#8853;</label><input type=\"checkbox\" id=\"tufte-mn-\" class=\"margin-toggle\"><span class=\"marginnote\">![](https://media.giphy.com/media/3ofT5TkrPPueovRFaE/giphy.gif)</span>\n\n::: {.cell}\n\n```{.r .cell-code}\n## Add the dish names to the y-axis, remove grid\np <- layout(p,\n            xaxis = list(showgrid = FALSE),\n            yaxis = list(showgrid = FALSE, \n                         tickmode = \"array\",\n                         tickvals = 1:nrow(dishes_df),\n                         ticktext = unique(dishes_df$dish)),\n            margin = list(l = 200, r = 50, b = 50, t = 50, pad = 4),\n            plot_bgcolor = \"#EBE5E5\",\n            paper_bgcolor = \"#EBE5E5\",\n            ## add a turkey because why not!\n            images = list(\n      list(source = \"https://upload.wikimedia.org/wikipedia/commons/c/c9/Twemoji2_1f983.svg\",\n           xref = \"paper\",\n           yref = \"paper\",\n           x= 0.75,\n           y= 1,\n           sizex = 0.25,\n           sizey = 0.25\n           ) )\n\n)\np\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-d15a2dcbd3c2b84bf7a2\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-d15a2dcbd3c2b84bf7a2\">{\"x\":{\"visdat\":{\"1126a47ccc278\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"1126a47ccc278\",\"attrs\":{\"1126a47ccc278\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 08:00:00.000000\",\"2017-11-23 08:30:00.000000\"],\"y\":[1,1],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  stuffing <br> Cook time:  30 minutes<br> Where:  oven\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.1\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 07:45:00.000000\",\"2017-11-23 08:00:00.000000\"],\"y\":[2,2],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#D89048\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  gravy <br> Cook time:  15 minutes<br> Where:  stove\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.2\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 07:30:00.000000\",\"2017-11-23 07:40:00.000000\"],\"y\":[3,3],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#D89048\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  green beans <br> Cook time:  10 minutes<br> Where:  stove\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.3\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 07:30:00.000000\",\"2017-11-23 07:40:00.000000\"],\"y\":[4,4],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#D89048\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  cranberry sauce <br> Cook time:  10 minutes<br> Where:  stove\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.4\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 04:30:00.000000\",\"2017-11-23 08:00:00.000000\"],\"y\":[5,5],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  turkey <br> Cook time:  210 minutes<br> Where:  oven\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.5\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 04:30:00.000000\",\"2017-11-23 08:00:00.000000\"],\"y\":[6,6],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#783030\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  turkey 2 <br> Cook time:  210 minutes<br> Where:  oven (bro-in-law)\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.6\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 03:00:00.000000\",\"2017-11-23 07:00:00.000000\"],\"y\":[7,7],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#A87860\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  mashed potatoes <br> Cook time:  240 minutes<br> Where:  slow cooker (mom)\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.7\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 03:00:00.000000\",\"2017-11-23 07:00:00.000000\"],\"y\":[8,8],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#904830\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  sweet potatoes <br> Cook time:  240 minutes<br> Where:  slow cooker (Lucy)\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.8\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 02:45:00.000000\",\"2017-11-23 03:15:00.000000\"],\"y\":[9,9],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  apple pie <br> Cook time:  30 minutes<br> Where:  oven\",\"showlegend\":false,\"inherit\":true},\"1126a47ccc278.9\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"x\":[\"2017-11-23 02:00:00.000000\",\"2017-11-23 02:30:00.000000\"],\"y\":[10,10],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":\"text\",\"text\":\"Dish:  pumpkin pie <br> Cook time:  30 minutes<br> Where:  oven\",\"showlegend\":false,\"inherit\":true}},\"layout\":{\"margin\":{\"b\":50,\"l\":200,\"t\":50,\"r\":50,\"pad\":4},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"showgrid\":false,\"title\":[]},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"showgrid\":false,\"tickmode\":\"array\",\"tickvals\":[1,2,3,4,5,6,7,8,9,10],\"ticktext\":[\"stuffing\",\"gravy\",\"green beans\",\"cranberry sauce\",\"turkey\",\"turkey 2\",\"mashed potatoes\",\"sweet potatoes\",\"apple pie\",\"pumpkin pie\"],\"title\":[]},\"plot_bgcolor\":\"#EBE5E5\",\"paper_bgcolor\":\"#EBE5E5\",\"images\":[{\"source\":\"https://upload.wikimedia.org/wikipedia/commons/c/c9/Twemoji2_1f983.svg\",\"xref\":\"paper\",\"yref\":\"paper\",\"x\":0.75,\"y\":1,\"sizex\":0.25,\"sizey\":0.25}],\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[\"2017-11-23 08:00:00.000000\",\"2017-11-23 08:30:00.000000\"],\"y\":[1,1],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  stuffing <br> Cook time:  30 minutes<br> Where:  oven\",\"Dish:  stuffing <br> Cook time:  30 minutes<br> Where:  oven\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 07:45:00.000000\",\"2017-11-23 08:00:00.000000\"],\"y\":[2,2],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#D89048\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  gravy <br> Cook time:  15 minutes<br> Where:  stove\",\"Dish:  gravy <br> Cook time:  15 minutes<br> Where:  stove\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(255,127,14,1)\",\"line\":{\"color\":\"rgba(255,127,14,1)\"}},\"error_y\":{\"color\":\"rgba(255,127,14,1)\"},\"error_x\":{\"color\":\"rgba(255,127,14,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 07:30:00.000000\",\"2017-11-23 07:40:00.000000\"],\"y\":[3,3],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#D89048\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  green beans <br> Cook time:  10 minutes<br> Where:  stove\",\"Dish:  green beans <br> Cook time:  10 minutes<br> Where:  stove\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(44,160,44,1)\",\"line\":{\"color\":\"rgba(44,160,44,1)\"}},\"error_y\":{\"color\":\"rgba(44,160,44,1)\"},\"error_x\":{\"color\":\"rgba(44,160,44,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 07:30:00.000000\",\"2017-11-23 07:40:00.000000\"],\"y\":[4,4],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#D89048\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  cranberry sauce <br> Cook time:  10 minutes<br> Where:  stove\",\"Dish:  cranberry sauce <br> Cook time:  10 minutes<br> Where:  stove\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(214,39,40,1)\",\"line\":{\"color\":\"rgba(214,39,40,1)\"}},\"error_y\":{\"color\":\"rgba(214,39,40,1)\"},\"error_x\":{\"color\":\"rgba(214,39,40,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 04:30:00.000000\",\"2017-11-23 08:00:00.000000\"],\"y\":[5,5],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  turkey <br> Cook time:  210 minutes<br> Where:  oven\",\"Dish:  turkey <br> Cook time:  210 minutes<br> Where:  oven\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(148,103,189,1)\",\"line\":{\"color\":\"rgba(148,103,189,1)\"}},\"error_y\":{\"color\":\"rgba(148,103,189,1)\"},\"error_x\":{\"color\":\"rgba(148,103,189,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 04:30:00.000000\",\"2017-11-23 08:00:00.000000\"],\"y\":[6,6],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#783030\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  turkey 2 <br> Cook time:  210 minutes<br> Where:  oven (bro-in-law)\",\"Dish:  turkey 2 <br> Cook time:  210 minutes<br> Where:  oven (bro-in-law)\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(140,86,75,1)\",\"line\":{\"color\":\"rgba(140,86,75,1)\"}},\"error_y\":{\"color\":\"rgba(140,86,75,1)\"},\"error_x\":{\"color\":\"rgba(140,86,75,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 03:00:00.000000\",\"2017-11-23 07:00:00.000000\"],\"y\":[7,7],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#A87860\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  mashed potatoes <br> Cook time:  240 minutes<br> Where:  slow cooker (mom)\",\"Dish:  mashed potatoes <br> Cook time:  240 minutes<br> Where:  slow cooker (mom)\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(227,119,194,1)\",\"line\":{\"color\":\"rgba(227,119,194,1)\"}},\"error_y\":{\"color\":\"rgba(227,119,194,1)\"},\"error_x\":{\"color\":\"rgba(227,119,194,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 03:00:00.000000\",\"2017-11-23 07:00:00.000000\"],\"y\":[8,8],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#904830\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  sweet potatoes <br> Cook time:  240 minutes<br> Where:  slow cooker (Lucy)\",\"Dish:  sweet potatoes <br> Cook time:  240 minutes<br> Where:  slow cooker (Lucy)\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(127,127,127,1)\",\"line\":{\"color\":\"rgba(127,127,127,1)\"}},\"error_y\":{\"color\":\"rgba(127,127,127,1)\"},\"error_x\":{\"color\":\"rgba(127,127,127,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 02:45:00.000000\",\"2017-11-23 03:15:00.000000\"],\"y\":[9,9],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  apple pie <br> Cook time:  30 minutes<br> Where:  oven\",\"Dish:  apple pie <br> Cook time:  30 minutes<br> Where:  oven\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(188,189,34,1)\",\"line\":{\"color\":\"rgba(188,189,34,1)\"}},\"error_y\":{\"color\":\"rgba(188,189,34,1)\"},\"error_x\":{\"color\":\"rgba(188,189,34,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null},{\"x\":[\"2017-11-23 02:00:00.000000\",\"2017-11-23 02:30:00.000000\"],\"y\":[10,10],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"color\":\"#487878\",\"width\":20},\"hoverinfo\":[\"text\",\"text\"],\"text\":[\"Dish:  pumpkin pie <br> Cook time:  30 minutes<br> Where:  oven\",\"Dish:  pumpkin pie <br> Cook time:  30 minutes<br> Where:  oven\"],\"showlegend\":false,\"marker\":{\"color\":\"rgba(23,190,207,1)\",\"line\":{\"color\":\"rgba(23,190,207,1)\"}},\"error_y\":{\"color\":\"rgba(23,190,207,1)\"},\"error_x\":{\"color\":\"rgba(23,190,207,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nHappy feasting! ü¶É‚ù§Ô∏è\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}